{{ define "main" }}

<section class="mx-auto max-w-5xl px-4 md:px-6 lg:px-8 py-10">
  <header class="mb-10">
    <h1 class="text-4xl md:text-5xl font-extrabold">
      {{ .Title }}
    </h1>
    {{ with .Params.description }}
      <p class="mt-3 text-neutral-500 dark:text-neutral-400 text-lg">
        {{ . }}
      </p>
    {{ end }}
  </header>

  {{ $pages := where .Site.RegularPages "Type" "posts" }}
  {{ $grouped := $pages.GroupByDate "2006" }}

  <div class="space-y-4">
    {{ range $grouped }}
      {{ $year := .Key }}
      <details id="{{ $year }}" class="rounded-lg border border-neutral-300 dark:border-neutral-700 overflow-hidden">
        <summary class="cursor-pointer select-none px-4 py-3 flex items-center justify-between hover:bg-neutral-50 dark:hover:bg-neutral-800/40">
          <span class="text-xl font-bold">{{ $year }}</span>
          <span class="text-sm text-neutral-400">{{ len .Pages }}</span>
        </summary>

        <div class="px-4 py-4">
          <ul class="space-y-3">
            {{ range .Pages }}
              <li class="flex items-baseline gap-4">
                <span class="text-sm text-neutral-400 w-20 shrink-0">
                  {{ .Date.Format "Jan 02" }}
                </span>

                <a href="{{ .RelPermalink }}" class="font-medium hover:underline">
                  {{ .Title }}
                </a>
              </li>
            {{ end }}
          </ul>
        </div>
      </details>
    {{ end }}
  </div>
</section>

{{ end }}
